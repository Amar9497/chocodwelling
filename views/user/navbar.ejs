<header class="bg-gradient-to-r from-[#8B7355] to-[#A79277] text-white shadow-lg sticky top-0 z-50">
  <div class="container mx-auto flex justify-between items-center px-4 py-3">
    <!-- Logo -->
    <a href="/home" class="flex-shrink-0">
      <img
        src="/public/assets/chocodwellin-logo.png"
        alt="logo"
        class="h-12 transform transition-all duration-300 hover:scale-105"
      />
    </a>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex items-center space-x-8">
      <a href="/home" 
         class="nav-link relative font-medium py-2 hover:text-white transition-colors duration-300
                after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 
                after:bg-white after:transition-all after:duration-300 hover:after:w-full"
      >Home</a>
      <a href="/category" 
         class="nav-link relative font-medium py-2 hover:text-white transition-colors duration-300
                after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 
                after:bg-white after:transition-all after:duration-300 hover:after:w-full"
      >Categories</a>
      <a href="/category" 
         class="nav-link relative font-medium py-2 hover:text-white transition-colors duration-300
                after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 
                after:bg-white after:transition-all after:duration-300 hover:after:w-full"
      >Brand</a>
      <a href="/allproduct" 
         class="nav-link relative font-medium py-2 hover:text-white transition-colors duration-300
                after:absolute after:bottom-0 after:left-0 after:h-0.5 after:w-0 
                after:bg-white after:transition-all after:duration-300 hover:after:w-full"
      >All Products</a>
      
    </nav>

    <!-- Right Icons -->
    <div class="hidden md:flex items-center space-x-6">
      <!-- Search Icon -->
      <button
        id="search-toggle"
        class="group flex items-center space-x-2 p-2 rounded-lg hover:bg-white/10 transition-all duration-300"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5 group-hover:scale-110 transition-transform duration-300"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
        <span class="hidden lg:block font-medium">Search</span>
      </button>

      <!-- Profile Icon -->
      <button
        onclick="window.location.href='/profile';"
        class="group flex items-center space-x-2 p-2 rounded-lg hover:bg-white/10 transition-all duration-300"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 12c2.485 0 4.5-2.015 4.5-4.5S14.485 3 12 3 7.5 5.015 7.5 7.5 9.515 12 12 12zm0 2c-2.69 0-8 1.345-8 4v1.5h16V18c0-2.655-5.31-4-8-4z"
          />
        </svg>
      </button>

      <!-- Cart Icon -->
      <button
        onclick="window.location.href='/cart';"
        class="group flex items-center space-x-2 p-2 rounded-lg hover:bg-white/10 transition-all duration-300"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M3 3h18l-1 5H4l-1-5zm2 7h14v8H5v-8zm6 2a1 1 0 11-2 0 1 1 0 012 0zm6 0a1 1 0 11-2 0 1 1 0 012 0z"
          />
        </svg>
      </button>

      <!-- Wishlist Icon -->
      <button 
      onclick="window.location.href='/wishlist';"
      class="group flex items-center space-x-2 p-2 rounded-lg hover:bg-white/10 transition-all duration-300">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M4.5 6.5A5.5 5.5 0 0112 4a5.5 5.5 0 017.5 2.5 6.48 6.48 0 01-2.14 8.78l-5.36 4.57a.75.75 0 01-1.04 0l-5.36-4.57A6.48 6.48 0 014.5 6.5z"
          />
        </svg>
      </button>
      
    </div>

    <!-- Mobile Menu Toggle -->
    <button 
      id="menu-toggle" 
      class="md:hidden p-2 rounded-lg hover:bg-white/10 transition-all duration-300 focus:outline-none"
    >
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>

  <!-- Search Bar -->
  <div id="search-bar" class="hidden transform transition-all duration-300">
    <div class="container mx-auto px-4 py-3 bg-white/5 backdrop-blur-md">
      <form onsubmit="handleSearch(event)" class="flex items-center gap-4">
        <input
          type="text"
          id="searchInput"
          name="search"
          placeholder="Search products..."
          class="w-full bg-white/10 border border-white/20 rounded-lg px-4 py-2 
                 focus:outline-none focus:ring-2 focus:ring-white/30 focus:bg-white/20
                 placeholder-white/70 transition-all duration-300"
          onkeypress="return /[a-zA-Z0-9\s]/.test(event.key)"
          oninput="this.value = this.value.replace(/[^a-zA-Z0-9\s]/g, '')"
          style="text-transform: capitalize;"
        />
        <button
          type="submit"
          class="bg-white/10 text-white px-6 py-2 rounded-lg hover:bg-white/20 
                 transition-all duration-300 focus:outline-none focus:ring-2 
                 focus:ring-white/30"
        >
          Search
        </button>
      </form>
    </div>
  </div>

  <!-- Mobile Menu -->
  <nav id="mobile-menu" class="hidden md:hidden bg-[#A79277]/95 backdrop-blur-sm">
    <div class="container mx-auto px-4 py-2 space-y-1">
      <a href="/home" class="block px-4 py-2 rounded-lg hover:bg-white/10 transition-all duration-300">
        Home
      </a>
      <a href="/category" class="block px-4 py-2 rounded-lg hover:bg-white/10 transition-all duration-300">
        Categories
      </a>
      <a href="/category" class="block px-4 py-2 rounded-lg hover:bg-white/10 transition-all duration-300">
        Brand
      </a>
      <a href="/allproduct" class="block px-4 py-2 rounded-lg hover:bg-white/10 transition-all duration-300">
        All Products
      </a>
    </div>
  </nav>
</header>

<script>
  const menuToggle = document.getElementById("menu-toggle");
  const mobileMenu = document.getElementById("mobile-menu");
  const searchToggle = document.getElementById("search-toggle");
  const searchBar = document.getElementById("search-bar");

  // Smooth toggle function
  const smoothToggle = (element) => {
    if (element.classList.contains('hidden')) {
      element.classList.remove('hidden');
      element.classList.add('opacity-0');
      setTimeout(() => element.classList.remove('opacity-0'), 10);
    } else {
      element.classList.add('opacity-0');
      element.addEventListener('transitionend', () => {
        element.classList.add('hidden');
      }, { once: true });
    }
  };

  menuToggle.addEventListener("click", () => smoothToggle(mobileMenu));
  searchToggle.addEventListener("click", () => smoothToggle(searchBar));

  // Close mobile menu on window resize if screen becomes larger
  window.addEventListener('resize', () => {
    if (window.innerWidth >= 768) { // md breakpoint
      mobileMenu.classList.add('hidden');
    }
  });

  // Function to handle search
  async function handleSearch(event) {
    event.preventDefault();
    const searchInput = document.getElementById('searchInput');
    const searchTerm = searchInput.value.trim();

    if (searchTerm) {
      // Redirect to all products page with search query
      window.location.href = `/allproduct?search=${encodeURIComponent(searchTerm)}`;
    }
  }

  // Add event listener for search input
  document.getElementById('searchInput').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
      handleSearch(event);
    }
  });
</script>